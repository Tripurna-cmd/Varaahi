<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Login - Varaahi Computer Embroidery</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f9f3ff; display:flex; align-items:center; justify-content:center; height:100vh; margin:0; }
    .login-container { background:#fff; padding:28px; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.15); width:350px; text-align:center; }
    h2 { color: purple; margin-bottom:18px; }
    input { width:90%; padding:10px; margin:8px 0; border:1px solid #ccc; border-radius:6px; font-size:15px; }
    button { background:purple; color:#fff; padding:10px; border:none; border-radius:6px; width:94%; font-size:16px; cursor:pointer; }
    button:hover { background:#5e0e87; }
    .small { margin-top:12px; font-size:14px; }
    .small a { color:purple; text-decoration:none; font-weight:bold; }
  </style>
</head>
<body>
  <div class="login-container">
    <h2>Login</h2>

    <form id="loginForm" autocomplete="off">
      <input id="username" type="text" placeholder="Username" required />
      <input id="password" type="password" placeholder="Password" required />
      <button type="submit">Login</button>
    </form>

    <p class="small">Don't have an account? <a href="register.html">Register here</a></p>
  </div>

  <script>
    // If already logged in, go to home
    if (localStorage.getItem("loggedInUser")) {
      window.location.href = "index.html";
    }

    const form = document.getElementById("loginForm");
    form.addEventListener("submit", function (e) {
      e.preventDefault();

      const username = document.getElementById("username").value.trim();
      const password = document.getElementById("password").value;

      if (!username || !password) {
        alert("Please enter both username and password.");
        return;
      }

      // Load users
      const raw = localStorage.getItem("users");
      const users = raw ? JSON.parse(raw) : [];

      // Find user (case-insensitive username)
      const user = users.find(u => u.username.toLowerCase() === username.toLowerCase());

      if (!user) {
        alert("No account found with that username. Please register first.");
        return;
      }

      if (user.password !== password) {
        alert("Incorrect password. Please try again.");
        return;
      }

      // Success â€” set session
      localStorage.setItem("loggedInUser", user.username);

      alert("Login successful! Welcome back, " + user.username);
      window.location.href = "index.html";
    });
  </script>
</body>
</html>
